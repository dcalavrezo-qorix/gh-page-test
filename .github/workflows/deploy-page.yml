name: Deploy Documentation to gh-pages

on:
  workflow_run:
    workflows: ["Test Deploy Versioned Pages"]  
    types:
      - completed
jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write  
      pages: write
      id-token: write

    steps:
      # Step 1: Check out the deployment repository
      - name: Checkout Deployment Repository
        uses: actions/checkout@v4


      - name: Download Artifact
        uses: actions/download-artifact@v4
        with:
          name: docs-build 
          run-id: ${{ github.event.workflow_run.id }}


      - name: Run Custom Deploy Action ðŸš€
        uses: ./.github/actions/deploy-versioned-pages
        with:
          event_name: ${{ github.event_name }}
          ref_name: ${{ github.ref_name }}
          pr_number: ${{ github.event.pull_request.number || '' }}
          source_folder: "docs-build"  
          versions_file: "versions"
          create_comment: "true"
